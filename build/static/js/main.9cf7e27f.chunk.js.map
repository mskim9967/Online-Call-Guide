{"version":3,"sources":["Player.js","SongCardList.js","SongCard.js","Nav.js","PlaylistTab.js","Content.js","Popup.js","App.js","index.js","Tag.js"],"names":["WhiteCheckbox","withStyles","root","color","grey","margin","checked","props","disableGutters","size","audio","Audio","Player","location","useLocation","history","useHistory","useParams","lang","useState","isAudioPaused","setAudioPaused","isPlaylistActive","setPlaylistActive","isShuffleActive","setShuffleActive","repeatState","setRepeatState","needActive","setNeedActive","songData","setSongData","playlist","setPlaylist","nowPlay","setNowPlay","delay","setDelay","isPlaylistModalActive","setPlaylistModalActive","isSecondActive","setSecondActive","loadData","loadDataTrigger","pageRef","useRef","inputRef","progressBarAreaRef","search","queryString","parse","song_id","showLyricMean","setShowLyricMean","showLyricLex","setShowLyricLex","showCallLex","setShowCallLex","fanlightColor","setFanlightColor","lyricCallData","setLyricCallData","highlight","setHighlight","beat","setBeat","activeBlock","setActiveBlock","audioProgress","setAudioProgress","beatLen","setBeatLen","part","setPart","scrollLock","setScrollLock","handlers","useSwipeable","onSwipedRight","eventData","onSwipedLeft","onSwipeStart","dir","current","scrollTop","replace","pathname","playlistHandlers","cp","setCp","audioHandlers","e","pause","onSwiping","deltaX","onSwiped","currentTime","duration","play","buttonColor","themeColor","modalTimer","focusTimerID","getSongData","link","axios","get","getLyricCallData","LyricCall","useEffect","clearTimeout","document","documentElement","style","setProperty","hex_setSat","value","setTimeout","focus","window","localStorage","setItem","JSON","stringify","playlists","timerID","timer2ID","isPlayerActive","setInterval","Math","floor","parseFloat","clearInterval","temp","Array","fill","map","block","lyricLex","lyric","i","beats","start","findIndex","lineStartBeat","highlightEnd","highlightStart","console","log","querySelector","scrollIntoView","behavior","playerReducer","songOrder","ele","length","needUpdate","reload","playlistNum","data","playlistReload","paused","all","then","spread","res1","res2","slice","rows","song_bpm","song_delay","song_color_type","idol_shown_color","unit_shown_color","song_fixed_color","pass","dispatch","type","src","addEventListener","catch","onended","parseInt","random","res","className","onClick","push","album_id","onTouchStart","kr","en","jp","ref","name","placeholder","trim","payload","alert","pl","idx","idol","includes","boxShadow","idol_id","fontSize","defaultChecked","onChange","event","target","lyricMean","id","text","callLex","call","noRepeat","repeat","repeatOne","song","eval","song_title_en","stopPropagation","nativeEvent","stopImmediatePropagation","splice","song_type","offsetWidth","clientX","width","unit_name_en","idolCV","idol_name_en","cv_name_en","adjust","amount","undefined","min","max","toString","substr","getBrightness","c","substring","rgb","hexToHSL","H","r","g","b","cmin","cmax","delta","h","l","round","abs","toFixed","sat","v","s","f","n","k","stateToProps","state","playerActiveReducer","langReducer","nowPage","pageReducer","playlistsReducer","connect","SongCardList","isFilterActive","setFilterActive","songs","setSongs","songsFilter","setSongsFilter","songsInputFilter","setSongsInputFilter","productions","setProductions","productionChecked","setProductionChecked","productionCheckedCnt","setProductionCheckedCnt","songAttrs","setSongAttrs","songAttrChecked","setSongAttrChecked","songAttrCheckedCnt","setSongAttrCheckedCnt","levels","setLevelsAttrs","levelChecked","setLevelChecked","levelCheckedCnt","setLevelCheckedCnt","inputVal","setInputVal","order","setOrder","orderSt","setOrderSt","dark","light","useStyles","makeStyles","theme","borderColor","classes","inputFilter","val","getSongIdol","getSongUnit","filter","tk","song_title_kr","te","tj","song_title_jp","si","toLowerCase","some","shuffle","production_id","song_level","sort","a","toUpperCase","album_release_date","production","classify","color1","production_color","color2","padding","1","2","4","songAttr","0","3","level","variant","maxWidth","marginRight","labelId","array","j","themeReducer","SongCard","tagData","setTagData","isLoading","setLoading","componentRef","isSwiped","setSwiped","handleClick","contains","removeEventListener","idol_color","cv_id","unit","unit_id","unit_color","hex_setHue","hue","iconColor","iconActiveColor","onSwipedUp","activeArea","setActiveArea","activatedCardModal","setActivatedCardModal","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","confirm","page","path","anim","animReducer","isPopupActiveded","setPopupActiveded","ToggleButtonGroup","exclusive","ToggleButton","Switch","getItem","matchMedia","matches","exact","render","to","match","params","playerDefault","playerActive","playlistsDefault","store","createStore","combineReducers","action","find","forEach","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9cf7e27f.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux'\nimport { useLocation, useParams, useHistory } from 'react-router-dom';\nimport { useSwipeable } from \"react-swipeable\";\nimport queryString from 'query-string';\nimport { Element, scroller } from \"react-scroll\";\n\nimport IconButton from '@material-ui/core/IconButton';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport PlaylistPlayIcon from '@material-ui/icons/PlaylistPlay';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport RepeatOneIcon from '@material-ui/icons/RepeatOne';\nimport SaveIcon from '@material-ui/icons/Save';\n\nimport { Checkbox } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\nconst WhiteCheckbox = withStyles({ root: { color: grey[700], margin: 'none','&$checked': { color: grey[500], }, }, checked: {}, })((props) => <Checkbox disableGutters color=\"default\" size='small' margin='0' {...props} />);\n\nconst audio = new Audio();\n\nfunction Player(props) {\n\t\n\tconst location = useLocation();\n\tconst history = useHistory();\n\t\n\tconst { lang } = useParams();\n\tconst [isAudioPaused, setAudioPaused] = useState(true);\n\tconst [isPlaylistActive, setPlaylistActive] = useState(false);\n\tconst [isShuffleActive, setShuffleActive] = useState(false);\n\tconst [repeatState, setRepeatState] = useState('repeat');\n\tconst [needActive, setNeedActive] = useState(false);\n\t\n\tconst [songData, setSongData] = useState([]);\n\t\n\tconst [playlist, setPlaylist] = useState([]);\n\tconst [nowPlay, setNowPlay] = useState(-1);\n\tconst [delay, setDelay] = useState(0.0);\n\tconst [isPlaylistModalActive, setPlaylistModalActive] = useState(false);\n\tconst [isSecondActive, setSecondActive] = useState(null);\n\tconst [loadData, loadDataTrigger] = useState(false);\t\n\t\n\tconst pageRef = useRef(null);\n\tconst inputRef = useRef(null);\n\tconst progressBarAreaRef = useRef(null);\n\t\n\tconst { search } = useLocation()\n\tconst { song_id } = queryString.parse(search);\n\t\n\tconst [showLyricMean, setShowLyricMean] = useState(true);\n\tconst [showLyricLex, setShowLyricLex] = useState(true);\n\tconst [showCallLex, setShowCallLex] = useState(true);\n\t\n\tconst [fanlightColor,setFanlightColor] = useState('#ffffff');\n\tconst [lyricCallData, setLyricCallData] = useState([]);\n\tconst [highlight, setHighlight] = useState(false);\n\tconst [beat, setBeat] = useState(0);\n\tconst [activeBlock, setActiveBlock] = useState(0);\n\tconst [audioProgress, setAudioProgress] = useState(0);\n\tconst [beatLen, setBeatLen] = useState(0.0);\n\tconst [part, setPart] = useState([]);\n\tconst [scrollLock, setScrollLock] = useState(true);\n\tconst handlers = useSwipeable({\n\t\t\tonSwipedRight: (eventData) => setPlaylistActive(false),\n  \t\tonSwipedLeft: (eventData) => setPlaylistActive(true),\n\t\t\tonSwipeStart: (eventData) => {\n\t\t\t\tif(eventData.dir==='Up'||eventData.dir==='Down') setScrollLock(false);\n\t\t\t\tif(eventData.dir==='Down') \n\t\t\t\t\tif(pageRef.current.scrollTop===0) history.replace(`${location.pathname}`);\n\t\t\t},\n\t});\n\tconst playlistHandlers = useSwipeable({\n\t\t\tonSwipeStart: (eventData) => {\n\t\t\t\tif(eventData.dir==='Down') \n\t\t\t\t\thistory.replace(`${location.pathname}`);\n\t\t\t},\n\t});\n\tconst [cp, setCp] = useState(0);\n\tconst audioHandlers = useSwipeable({\n\t\tonSwipeStart: (e)=>{pause();setCp(audioProgress);},\n\t\tonSwiping: (e)=>{setAudioProgress(cp+e.deltaX/6)},\n\t\tonSwiped: (e)=>{if(audio.currentTime) audio.currentTime=audioProgress/100*audio.duration; setHighlight(false); play()}\n\t});\n\tvar buttonColor= '#eeeeee', themeColor='#ffffff';\n\tvar modalTimer, focusTimerID;\n\t\n\tfunction play(){\n\t\taudio.play();\n\t\tsetAudioPaused(false);\n\t}\n\t\n\tfunction pause(){\n\t\taudio.pause();\n\t\tsetAudioPaused(true);\n\t}\n\n\tuseEffect(()=>{\n\t\treturn ()=>{clearTimeout(modalTimer);clearTimeout(focusTimerID);}\n\t},[]);\n\n\tuseEffect(()=>{\n\t\tdocument.documentElement.style.setProperty(\"--flc\", highlight?'#ffa000':fanlightColor);\n\t},[highlight]);\n\t\n\tuseEffect(()=>{\n\t\tdocument.documentElement.style.setProperty(\"--flc\", fanlightColor);\n\t\tthemeColor=hex_setSat(fanlightColor, 0.13);\n\t\tdocument.documentElement.style.setProperty(\"--tc\", themeColor);\n\t},[fanlightColor]);\n\t\n\tuseEffect(()=>{\n\t\tif(!song_id || !isPlaylistModalActive) {\n\t\t\tsetPlaylistModalActive(false);\n\t\t\tsetSecondActive(null);\n\t\t\tinputRef.current.value='';\n\t \t}\n\t},[song_id, isPlaylistModalActive]);\n\t\n\tuseEffect(()=>{\n\t\tif(isSecondActive==='new') {\n\t\t\tfocusTimerID = setTimeout(()=>{\n\t\t\t\tinputRef.current.focus();\n\t\t\t},300);\n\t \t}\n\t},[isSecondActive]);\n\t\n\tuseEffect(()=>{\n\t\twindow.localStorage.setItem(\"playlists\", JSON.stringify(props.playlists));\n\t},[props.playlists]);\n\t\n\t\n\tuseEffect(()=>{\n\t\tlet timerID, timer2ID;\n\t\tif(!isAudioPaused && props.isPlayerActive) {\n\t\t\ttimerID = setInterval(()=>{\n\t\t\t\tsetBeat(Math.floor((audio.currentTime*1000+delay)/beatLen));\n\t\t\t},130);\n\t\t\ttimer2ID = setInterval(()=>{\n\t\t\t\tsetAudioProgress(parseFloat(audio.currentTime*1000)/(audio.duration*1000)*100);\n\t\t\t},1000);\n\t\t}\n\t\telse {\n\t\t\tclearInterval(timerID);\n\t\t\tclearInterval(timer2ID);\n\t\t}\n\t\treturn ()=>{\n\t\t\tclearInterval(timerID);\n\t\t\tclearInterval(timer2ID);\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\n\t},[isAudioPaused, props.isPlayerActive]);\n\n\tuseEffect(()=>{\n\t\tlet temp = new Array(2000).fill([]);\n\t\tlyricCallData.map((block)=>{\n\t\t\tblock.lyricLex?.map((lyric)=>{\n\t\t\t\tfor(let i = 0; i < lyric.beats; i++)\n\t\t\t\t\ttemp[lyric.start + i] = [...lyric.part];\n\t\t\t});\n\t\t});\n\t\tsetPart(temp);\n\t},[lyricCallData]);\n\t\n\tuseEffect(()=>{\n\t\tsetActiveBlock(lyricCallData.findIndex(e=>e.lineStartBeat>beat+2)-1);\n\t\tif(lyricCallData[activeBlock]?.highlightEnd === beat) setHighlight(false);\n\t\telse if(lyricCallData[activeBlock]?.highlightStart === beat) setHighlight(true);\n\t\tconsole.log(beat);\n\t\tconsole.log(lyricCallData[activeBlock]?.highlightStart);\n\t}, [beat]);\n\n\tuseEffect(()=>{\n\t\tif(scrollLock)\n\t\t\tdocument.querySelector('.block.active')?.scrollIntoView({ behavior:'smooth', block:'center'});\n\t\t// scroller.scrollTo('ele'+activeBlock, {\n\t\t// \tduration:1000, \n\t\t// \tsmooth: true\n\t\t// });\n\t\t// scroll.scrollToBottom();\n\t}, [activeBlock, scrollLock, lang]);\n\n\tfunction getSongData(link){\n\t\treturn axios.get(`/api/player_data_view?song_id=${link}`);\n\t}\n\tfunction getLyricCallData(link){\n\t\treturn axios.get(`/api/lyric_call/${lang}/${link}`);\n\t}\n\tuseEffect(()=>{\t\n\t\tif(props.playerReducer.song_id){////////////////////////////////////////////////////////////////////\n\t\t\t\tlet songOrder = playlist.findIndex((ele)=>ele.song_id==props.playerReducer.song_id); \n\t\t\t\tif(songOrder>=0) {\n\t\t\t\t\tsetNowPlay(songOrder);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetNowPlay(playlist.length);\n\t\t\t\t\tsetPlaylist([...playlist, {song_id:props.playerReducer.song_id, needUpdate: true}]);\n\t\t\t\t}\n\t\t\t\tsetNeedActive(true);\n\t\t\t\tloadDataTrigger(!loadData);\n\t\t}\n\t},[props.playerReducer.reload]);\n\t\n\t\n\tuseEffect(()=>{\t\n\t\tif(props.playerReducer.playlistNum!==null) {\n\t\t\tsetNowPlay(0);\n\t\t\tsetPlaylist([...(props.playlists[props.playerReducer.playlistNum].data)]);\n\t\t\tsetNeedActive(true);\n\t\t\tsetPlaylistActive(true);\n\t\t\tloadDataTrigger(!loadData);\n\t\t}\n\t},[props.playerReducer.playlistReload]);\n\t\n\tuseEffect(()=>{\n\t\tvar isPause = audio.paused;\n\t\tif(nowPlay!==-1)\t\t\t\n\t\t\taxios.all([getSongData(playlist[nowPlay].song_id), getLyricCallData(playlist[nowPlay].song_id)]).then(axios.spread((res1, res2)=>{\n\t\t\t\tsetHighlight(false);\n\t\t\t\tsetBeat(0);\n\t\t\t\tsetActiveBlock(0);\n\t\t\t\tsetAudioProgress(0);\n\t\t\t\tsetPart([0]);\n\t\t\t\tsetScrollLock(true);\n\t\t\t\tsetLyricCallData([]);\n\t\t\t\t\n\t\t\t\tif(playlist[nowPlay].needUpdate) setPlaylist([...playlist.slice(0, playlist.length-1), res1.data.rows[0]]);\n\t\t\t\tsetSongData(res1.data.rows);\n\t\t\t\tsetBeatLen(60000.0 / res1.data.rows[0].song_bpm);\n\t\t\t\tif(res1.data.rows[0].song_delay !== null) setDelay(res1.data.rows[0].song_delay);\n\t\t\t\t\n\t\t\t\tif(res1.data.rows[0].song_color_type === 0) setFanlightColor(res1.data.rows[0].idol_shown_color);\n\t\t\t\telse if(res1.data.rows[0].song_color_type === 1) setFanlightColor(res1.data.rows[0].unit_shown_color);\n\t\t\t\telse if(res1.data.rows[0].song_color_type === 2) setFanlightColor(res1.data.rows[0].song_fixed_color);\n\t\t\t\t\n\t\t\t\tprops.playerReducer.pass=true;\n\t\t\t\thistory.replace(`${location.pathname}?song_id=${res1.data.rows[0].song_id}`);\n\t\t\t\t\n\t\t\t\tsetLyricCallData(res2.data);\t\n\t\t\t\tif(needActive){ \n\t\t\t\t\tprops.dispatch({type:'playerActive'}); \n\t\t\t\t\tisPause=false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetNeedActive(false);\n\t\t\t\taudio.src = `/api/audio/${res1.data.rows[0].song_id}`;\n\t\t\t\t \n\t\t\t\taudio.addEventListener('canplaythrough',()=>{\n\t\t\t\t\tplay();\n\t\t\t\t}, false);\n\t\t\t})).catch();\n\t\treturn ()=>{\n\t\t\tpause();\n\t\t}\n\t},[loadData]);\n\n\taudio.onended=()=>{\n\t\tif(repeatState==='noRepeat') {\n\t\t\tpause();\n\t\t}\t\n\t\telse if(repeatState==='repeatOne') {\n\t\t\taudio.currentTime=0;\n\t\t\tplay();\n\t\t}\n\t\telse {\n\t\t\tif(isShuffleActive) {\n\t\t\t\tvar temp=parseInt(Math.random()*playlist.length);\n\t\t\t\twhile(temp===nowPlay && playlist.length!==1) temp=parseInt(Math.random()*playlist.length);\n\t\t\t\tsetNowPlay(temp);\n\t\t\t}\n\t\t\telse setNowPlay((nowPlay+1)%playlist.length); \n\t\t\tloadDataTrigger(!loadData);\n\t\t}\n \t};\n\t\n\tuseEffect(()=>{\n\t\tsetLyricCallData([]);\n\t\tif(songData.length)\n\t\t\taxios.get(`/api/lyric_call/${lang}/${songData[0].song_id}`)\n\t\t\t.then((res)=>{\n\t\t\t \tsetLyricCallData(res.data);\n\t\t\t }) \n\t\t\t.catch(()=>{});\n\t},[lang]);\n\t\n\tfunction LyricCall() {\n\t\treturn (<>{\n\t\t\t\n\t\t}</>)\n\t}\n\t\n\treturn (\n\t\t<>\n\t\t<div className={`${!songData.length&&'init'} coverImg ${props.isPlayerActive ? \"active\" : \"\"}`} onClick={()=>{\n\t\t\tif(props.isPlayerActive){\n\t\t\t\thistory.replace(`${location.pathname}`);\n\t\t\t} else{\n\t\t\t\thistory.push(`${location.pathname}?song_id=${props.playerReducer.song_id}`);\n\t\t\t}\n\t\t}}>\n\t\t\t<div className='dot'></div>\n\t\t\t{songData.length && <img src={\"/api/img/album/\"+songData[0].album_id}></img>}\n\t\t</div>\n\t\t\n\t\t<div className={`playlistModal alignCenter ${!isPlaylistModalActive&&'inactive'}`}>\n\t\t\t<div className={`bg ${!isPlaylistModalActive&&'inactive'}`} onTouchStart={()=>{modalTimer=setTimeout(()=>setSecondActive(null),700);setPlaylistModalActive(false)}}></div>\t\n\t\t\t<div className={`modalArea  ${isSecondActive!==null&&isSecondActive}`}>\n\t\t\t\t<div className={`first alignCenter ${isSecondActive&&'inactive'}`}>\n\t\t\t\t\t<div className='new' onClick={()=>setSecondActive('new')}>{{ kr: '새 플레이리스트로 저장', en: 'Save new playlist', jp: '新しいプレイリストとして保存' }[lang]}</div>\n\t\t\t\t\t<div className='change' onClick={()=>setSecondActive('change')}>{{ kr: '기존 플레이리스트와 교체', en: 'Replace with existing playlist', jp: '既存のプレイリストと交換' }[lang]}</div>\n\t\t\t\t\t<div className='add' onClick={()=>setSecondActive('add')}>{{ kr: '기존 플레이리스트에 추가', en: 'Add to existing playlist', jp: '既存のプレイリストに追加' }[lang]}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={`second alignCenter ${isSecondActive===null?'inactive':isSecondActive}`}>\n\t\t\t\t\t<div className={`new ${isSecondActive==='new'?'active':'inactive'}`}>\n\t\t\t\t\t\t<input className=\"newPlaylistInput\" ref={inputRef} type=\"text\" name=\"\" placeholder={{ kr: '새 플레이리스트 이름', en: 'New playlist name', jp: '新しいプレイリストの名前' }[lang]}/>\n\t\t\t\t\t\t<div className={`save alignCenter`} onClick={()=>{\n\t\t\t\t\t\t\tif(!inputRef.current.value.trim().length) {\n\t\t\t\t\t\t\t\t alert({ kr: '플레이리스트 이름을 입력하세요!', en: 'Please enter a playlist name!', jp: 'プレイリストの名前を入力してください!' }[lang]);\n\t\t\t\t\t\t\t\tinputRef.current.value='';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(props.playlists.findIndex(e=>e.name==inputRef.current.value)===-1) {\n\t\t\t\t\t\t\t\tsetPlaylistModalActive(false);\n\t\t\t\t\t\t\t\tprops.dispatch({type:'saveNew', payload:{name:inputRef.current.value, data: [...playlist]}});\n\t\t\t\t\t\t\t\thistory.replace(`/${lang}/playlist`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\talert({ kr: '플레이리스트 이름이 중복됩니다!', en: 'Duplicate playlist name!', jp: 'プレイリスト名が重複しています!' }[lang]);\n\t\t\t\t\t\t\t\tinputRef.current.value='';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}>{{ kr: '저장', en: 'Save', jp: '貯蔵' }[lang]}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div className={`change add ${(isSecondActive==='change' || isSecondActive==='add') ?'active':'inactive'}`}>\n\t\t\t\t\t{\n\t\t\t\t\t\tprops.playlists.map((pl, idx)=>{\n\t\t\t\t\t\t\treturn (<>\n\t\t\t\t\t\t\t<div className={`playlist`} onClick={()=>{\n\t\t\t\t\t\t\t\tsetPlaylistModalActive(false);\n\t\t\t\t\t\t\t\tif(isSecondActive==='change') props.dispatch({type:'replacePlaylist', payload:{name:pl.name, data: [...playlist]}});\n\t\t\t\t\t\t\t\telse props.dispatch({type:'addToPlaylist', payload:{name:pl.name, data: [...playlist]}});\n\t\t\t\t\t\t\t\thistory.replace(`/${lang}/playlist`);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<div className={`title`}><span>{pl.name}</span></div>\n\t\t\t\t\t\t\t\t<div className={`songCnt`}><span>{pl.data.length+{kr: '곡', en: ' songs', jp: '曲'}[lang]}</span></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>)\n\t\t\t\t\t\t})\t\t\n\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\n\t\t\n\t\t{songData.length&&<>\t\t\n\t\t<div className={`playerPage ${props.isPlayerActive && \"active\"}`}>\n\t\t\t{\n\t\t\t\t<div className={`infoArea ${(songData.length===1)&&'inactive'}`}>{\n\t\t\t\t\tsongData.map((idol, i)=>{\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<div className={`idolImgArea ${(part[beat]&&((part[beat][0]===9)||(part[beat].includes(i+1))))?'active':''}`}\n\t\t\t\t\t\t\t\tstyle={{boxShadow: (part[beat]&&((part[beat][0]===9)||(part[beat].includes(i+1))))?`0 0 8px 2px ${idol.idol_shown_color}`:''}}>\n\t\t\t\t\t\t\t\t<div className='shadow'><img src={\"/api/img/idol/\"+idol.idol_id}></img></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t)}</div>\n\t\t\t}\n\n\t\t<div className={`callGuideArea ${highlight ? \"highlight\":\"highlightEnd\"}`} {...handlers}>\n\t\t\t<div className={`lyricArea ${isPlaylistActive&&'inactive'}`} >\n\t\t\t\t<div className='iconsArea'>\n\t\t\t\t\t<div className='scrollLockIconArea'>{\n\t\t\t\t\t\tscrollLock?\t\n\t\t\t\t\t\t\t<LockIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>{setScrollLock(false)}}></LockIcon>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<LockOpenIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>{setScrollLock(true)}}></LockOpenIcon>\n\t\t\t\t\t}</div>\n\n\t\t\t\t\t<div className='checkBoxesArea'>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<WhiteCheckbox defaultChecked fontSize=\"small\" color=\"default\" onChange={(event)=>{\n\t\t\t\t\t\t\tevent.target.checked?setShowLyricMean(true):setShowLyricMean(false);\t\t\n\t\t\t\t\t\t}}></WhiteCheckbox>\n\t\t\t\t\t\t<div className='label'>{{ kr: '가사', en: 'Lyrics', jp: '袈裟' }[lang]}</div>\n\n\t\t\t\t\t\t<WhiteCheckbox defaultChecked fontSize=\"small\" color=\"default\" onChange={(event)=>{\n\t\t\t\t\t\t\tevent.target.checked?setShowLyricLex(true):setShowLyricLex(false);\t\t\n\t\t\t\t\t\t}}></WhiteCheckbox>\n\t\t\t\t\t\t<div className='label'>{{ kr: '발음', en: 'Romanized', jp: '発音' }[lang]}</div>\n\n\t\t\t\t\t\t<WhiteCheckbox defaultChecked fontSize=\"small\" color=\"default\" onChange={(event)=>{\n\t\t\t\t\t\t\tevent.target.checked?setShowCallLex(true):setShowCallLex(false);\t\t\n\t\t\t\t\t\t}}></WhiteCheckbox>\n\t\t\t\t\t\t<div className='label'>{{ kr: '콜', en: 'Call', jp: 'コール' }[lang]}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"text\" ref={pageRef}>{\n\t\t\t\t\tlyricCallData.length!==0?\n\t\t\t\t\t\tlyricCallData.map((block, idx)=>{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className={`block ${idx===activeBlock&&'active'}`}>\n\t\t\t\t\t\t\t\t\t<Element name={'ele'+idx}>\n\t\t\t\t\t\t\t\t\t\t{block.lyricMean&&<div className={`lyricMeanLine ${(idx===activeBlock)&&'active'} ${!showLyricMean&&'disable'} ${!showLyricLex&&'moveTop'}`}> <span className='lyricMean'>{block.lyricMean}</span></div>}\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tblock.lyricLex&&<div className={`lyricLexLine ${!showLyricLex&&'disable'}`}>{ block.lyricLex?.map((lyric, id)=>{\n\t\t\t\t\t\t\t\t\t\t\t\treturn( <span className={`lyricLex ${lyric.start<=beat&&lyric.start+lyric.beats>beat&&'active'}`} onClick={()=>{audio.currentTime=lyric.start*beatLen/1000.0; setHighlight(false);}}>{lyric.text}</span>)\n\t\t\t\t\t\t\t\t\t\t\t})}</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tblock.callLex&&<div className={`callLexLine ${!showCallLex&&'disable'}`}>{block.callLex?.map((call, id)=>{\n\t\t\t\t\t\t\t\t\t\t\t\treturn( <span className={`call ${call.start<=beat&&call.start+call.beats>beat&&'active'}`} onClick={()=>{audio.currentTime=call.start*beatLen/1000.0; setHighlight(false);}}>{call.text}</span>)\n\t\t\t\t\t\t\t\t\t\t\t})}</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tblock.behavior&&<div className='lyricLexLine'>{block.behavior?.map((behavior, id)=>{\n\t\t\t\t\t\t\t\t\t\t\t\treturn( <span className={`behavior ${behavior.start<=beat&&behavior.start+behavior.beats>beat&&'active'}`}>{behavior.text}</span>)\n\t\t\t\t\t\t\t\t\t\t\t})}</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Element>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t:\n\t\t\t\t\t\t<div className='alert'>{\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkr: '가사가 아직 등록되지 않았어요ㅜ',\n\t\t\t\t\t\t\t\ten: 'Lyric is not uploaded yet :(',\n\t\t\t\t\t\t\t\tjp: '歌詞がまだ登録されていません :('\n\t\t\t\t\t\t\t}[lang]\n\t\t\t\t\t\t}</div>\n\t\t\t\t\t}</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className={`playlistArea ${!isPlaylistActive&&'inactive'}`} {...playlistHandlers} >\n\t\t\t\t\t\n\t\t\t\t\t<div className='iconsArea'>\n\t\t\t\t\t<div className='shuffleIconArea'>{\n\t\t\t\t\t\tisShuffleActive?\t\n\t\t\t\t\t\t\t<ShuffleIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>{setShuffleActive(false)}}></ShuffleIcon>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ShuffleIcon style={{fontSize: 25, color:'#444444'}} onClick={()=>{setShuffleActive(true)}}></ShuffleIcon>\n\t\t\t\t\t}</div>\n\n\t\t\t\t\t<div className='repeatIconArea'>{\n\t\t\t\t\t{\n\t\t\t\t\t\tnoRepeat: <RepeatIcon style={{fontSize: 25, color:'#444444'}} onClick={()=>setRepeatState('repeat')}></RepeatIcon>,\n\t\t\t\t\t\trepeat: <RepeatIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>setRepeatState('repeatOne')}></RepeatIcon>,\n\t\t\t\t\t\trepeatOne: <RepeatOneIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>setRepeatState('noRepeat')}></RepeatOneIcon>\n\t\t\t\t\t}[repeatState]}</div>\n\t\t\t\t</div>\n\n\t\t\t\t\t<div className='labelArea'>{{\n\t\t\t\t\t\tkr: '플레이리스트',\n\t\t\t\t\t\ten: 'Playlist',\n\t\t\t\t\t\tjp: 'プレイリスト'\n\t\t\t\t\t}[lang]}\n\t\t\t\t\t\t<div className='saveIconArea'>\n\t\t\t\t\t\t\t<SaveIcon style={{fontSize: 30, color:buttonColor}} onClick={()=>setPlaylistModalActive(true)}></SaveIcon>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\n\t\t\t\t\t<div className='songsArea'>\n\t\t\t\t\t{\n\t\t\t\t\t\tplaylist.map((song, i)=>{ return(\n\t\t\t\t\t\t\t<div className={`songArea ${i===nowPlay&&'active'}`} onClick={(e)=>{setNowPlay(i);loadDataTrigger(!loadData);}}>\n\t\t\t\t\t\t\t\t<div className={`coverArea`}>\n\t\t\t\t\t\t\t\t\t<div className=\"cover\">\n\t\t\t\t\t\t\t\t\t\t<img src={\"/api/img/album/\"+song.album_id}></img>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={`titleArea`}>\n\t\t\t\t\t\t\t\t\t<span>{(eval('song.song_title_'+lang)||song.song_title_en)}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={`iconsArea`}>\n\t\t\t\t\t\t\t\t\t<div className={`clearIconArea alignCenter`}><IconButton size='small' onClick={(e)=>{\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\te.nativeEvent.stopImmediatePropagation();\n\t\t\t\t\t\t\t\t\t\tif(playlist.length!==1) {\n\t\t\t\t\t\t\t\t\t\t\tlet temp=[...playlist];\n\t\t\t\t\t\t\t\t\t\t\ttemp.splice(i, 1);\n\t\t\t\t\t\t\t\t\t\t\tsetPlaylist([...temp]);\n\t\t\t\t\t\t\t\t\t\t\tif(nowPlay>=i) { \n\t\t\t\t\t\t\t\t\t\t\t\tif(nowPlay===0 && i===0) setNowPlay(0);\n \t\t\t\t\t\t\t\t\t\t\t\telse setNowPlay(nowPlay-1);\n\t\t\t\t\t\t\t\t\t\t\t\tif(nowPlay===i) loadDataTrigger(!loadData);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}><ClearIcon style={{color:'#eeeeee'}}></ClearIcon></IconButton></div>\n\t\t\t\t\t\t\t\t\t<div className={`upIconArea alignCenter`} onClick={(e)=>{\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\te.nativeEvent.stopImmediatePropagation();\n\t\t\t\t\t\t\t\t\t\tif(i!==0) {\n\t\t\t\t\t\t\t\t\t\t\tif(i===nowPlay) setNowPlay(nowPlay-1);\n\t\t\t\t\t\t\t\t\t\t\telse if(i===nowPlay+1) setNowPlay(nowPlay+1);\n\t\t\t\t\t\t\t\t\t\t\tlet temp = [...playlist];\n\t\t\t\t\t\t\t\t\t\t\t[temp[i], temp[i-1]]=[temp[i-1], temp[i]];\n\t\t\t\t\t\t\t\t\t\t\tsetPlaylist([...temp]);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}} ><IconButton size='small'><ArrowDropUpIcon style={{color:'#eeeeee'}} fontSize='large'></ArrowDropUpIcon></IconButton></div>\n\t\t\t\t\t\t\t\t\t<div className={`downIconArea alignCenter`}><IconButton size='small' onClick={(e)=>{\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\te.nativeEvent.stopImmediatePropagation();\n\t\t\t\t\t\t\t\t\t\tif(i!==playlist.length-1) {\n\t\t\t\t\t\t\t\t\t\t\tif(i===nowPlay) setNowPlay(nowPlay+1);\n\t\t\t\t\t\t\t\t\t\t\telse if(i===nowPlay-1) setNowPlay(nowPlay-1);\n\t\t\t\t\t\t\t\t\t\t\tlet temp = [...playlist];\n\t\t\t\t\t\t\t\t\t\t\t[temp[i+1], temp[i]]=[temp[i], temp[i+1]];\n\t\t\t\t\t\t\t\t\t\t\tsetPlaylist([...temp]);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}} ><ArrowDropDownIcon style={{color:'#eeeeee'}} fontSize='large'></ArrowDropDownIcon></IconButton></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)})\n\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<div className={`closeIconArea ${(songData[0].song_type===0)&&'solo'}`}><ExpandMoreIcon style={{fontSize: 30, color:buttonColor}} onClick={()=>{ history.replace(`${location.pathname}`);}}></ExpandMoreIcon></div>\n\t\t\t\t\n\t\t\t\t<div className='pageChangeIconArea'>{\n\t\t\t\t\tisPlaylistActive?\t\n\t\t\t\t\t\t<MenuBookIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>{setPlaylistActive(false)}}></MenuBookIcon>\n\t\t\t\t\t:\n\t\t\t\t\t\t<PlaylistPlayIcon style={{fontSize: 30, color:buttonColor}} onClick={()=>{setPlaylistActive(true)}}></PlaylistPlayIcon>\n\t\t\t\t}</div>\n\t\t\t\t\n\n\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className='playerArea'  {...audioHandlers}>\n\t\t\t\t<div className='progressBarArea' ref={progressBarAreaRef} onClick={(e)=>{console.log(progressBarAreaRef.current.offsetWidth+\" \" +e.clientX); setAudioProgress(e.clientX/progressBarAreaRef.current.offsetWidth*100);\naudio.currentTime=e.clientX/progressBarAreaRef.current.offsetWidth*audio.duration; setHighlight(false); play()}}>\n\t\t\t\t\t<div className='progressBar' style={{width: audioProgress+'%'}}></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className='coverImgArea'></div>\n\t\t\t\t\n\t\t\t\t<div className='titleArea'><span>{(eval('songData[0].song_title_'+lang)||songData[0].song_title_en)}</span></div>\n\t\t\t\t\n\t\t\t\t<div className='artistArea'>{\n\t\t\t\t\t(songData[0].song_type===1 || songData[0].song_type===3) ?\n\t\t\t\t\t\t<span>{(eval('songData[0].unit_name_'+lang)||songData[0].unit_name_en)}</span>\n\t\t\t\t\t:\t\t\n\t\t\t\t\t\tsongData.map((idolCV, i)=>{\n\t\t\t\t\t\t\tif(songData.length === 1)\n\t\t\t\t\t\t\t\treturn(<span>{(eval('idolCV.idol_name_'+lang)||idolCV.idol_name_en) + (' (CV.'+(eval('idolCV.cv_name_'+lang)||idolCV.cv_name_en) +')')}</span>)\n\t\t\t\t\t\t\telse return(<span>{(i?\", \":\"\")+(eval('idolCV.idol_name_'+lang)||idolCV.idol_name_en)}</span>)\n\t\t\t\t\t\t})\n\t\t\t\t}</div>\n\t\t\t\t\n\t\t\t\t<div className='buttonsArea'>\n\t\t\t\t\t<SkipPreviousIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>{\n\t\t\t\t\t\t\tif(audio.currentTime>3) audio.currentTime=0;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif(isShuffleActive) {\n\t\t\t\t\t\t\t\t\tvar temp=parseInt(Math.random()*playlist.length);\n\t\t\t\t\t\t\t\t\twhile(temp===nowPlay && playlist.length!==1) temp=parseInt(Math.random()*playlist.length);\n\t\t\t\t\t\t\t\t\tsetNowPlay(temp);\n\t\t\t\t\t\t\t\t\tloadDataTrigger(!loadData);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tsetNowPlay((nowPlay-1+playlist.length)%playlist.length);\n\t\t\t\t\t\t\t\t\tloadDataTrigger(!loadData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}}></SkipPreviousIcon>\n\t\t\t\t\t{\n\t\t\t\t\t\tisAudioPaused?\n\t\t\t\t\t\t<PlayArrowIcon style={{fontSize: 35, color:buttonColor}} onClick={play}></PlayArrowIcon>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<PauseIcon style={{fontSize: 35, color:buttonColor}} onClick={pause}></PauseIcon>\n\t\t\t\t\t}\n\t\t\t\t\t<SkipNextIcon style={{fontSize: 25, color:buttonColor}} onClick={()=>{\n\t\t\t\t\t\tif(isShuffleActive) {\n\t\t\t\t\t\t\tvar temp=parseInt(Math.random()*playlist.length);\n\t\t\t\t\t\t\twhile(temp===nowPlay && playlist.length!==1) temp=parseInt(Math.random()*playlist.length);\n\t\t\t\t\t\t\tsetNowPlay(temp);\n\t\t\t\t\t\t\tloadDataTrigger(!loadData);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetNowPlay((nowPlay+1)%playlist.length);\n\t\t\t\t\t\t\tloadDataTrigger(!loadData);\n\t\t\t\t\t\t\n\t\t\t\t\t}}></SkipNextIcon>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t</>}\n\t\t</>\n\t)\n}\n\nfunction adjust(color, amount) {\n\tif(color===undefined) return null;\n    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));\n}\n\nfunction getBrightness(c){\n\tc = c.substring(1); // strip # \n\tvar rgb = parseInt(c, 16); // convert rrggbb to decimal \n\tvar r = (rgb >> 16) & 0xff; // extract red \n\tvar g = (rgb >> 8) & 0xff; // extract green \n\tvar b = (rgb >> 0) & 0xff; // extract blue \n\treturn (0.2126 * r + 0.7152 * g + 0.0722 * b); // per ITU-R BT.709 0~255 \n}\n\nfunction hexToHSL(H) { // Convert hex to RGB first \n\tlet r = 0, g = 0, b = 0; if (H.length === 4) { r = \"0x\" + H[1] + H[1]; g = \"0x\" + H[2] + H[2]; b = \"0x\" + H[3] + H[3]; } else if (H.length === 7) { r = \"0x\" + H[1] + H[2]; g = \"0x\" + H[3] + H[4]; b = \"0x\" + H[5] + H[6]; } // Then to HSL \n\tr /= 255; g /= 255; b /= 255; let cmin = Math.min(r,g,b), cmax = Math.max(r,g,b), delta = cmax - cmin, h = 0, s = 0, l = 0; if (delta === 0) h = 0; else if (cmax === r) h = ((g - b) / delta) % 6; else if (cmax === g) h = (b - r) / delta + 2; else h = (r - g) / delta + 4; h = Math.round(h * 60); if (h < 0) h += 360; l = (cmax + cmin) / 2; s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1)); s = +(s * 100).toFixed(1); l = +(l * 100).toFixed(1); return \"hsl(\" + h + \",\" + s + \"%,\" + l + \"%)\";\n}\nfunction hex_setSat(H, sat) { // Convert hex to RGB first \n\tlet r = 0, g = 0, b = 0; if (H.length === 4) { r = \"0x\" + H[1] + H[1]; g = \"0x\" + H[2] + H[2]; b = \"0x\" + H[3] + H[3]; } else if (H.length === 7) { r = \"0x\" + H[1] + H[2]; g = \"0x\" + H[3] + H[4]; b = \"0x\" + H[5] + H[6]; } // Then to HSL \n\tlet v=Math.max(r,g,b), c=v-Math.min(r,g,b); let h= c && ((v===r) ? (g-b)/c : ((v===g) ? 2+(b-r)/c : 4+(r-g)/c)); h=60*(h<0?h+6:h); let s=sat;\n\tlet f= (n,k=(n+h/60)%6) => v - v*s*Math.max( Math.min(k,4-k,1), 0); return `rgb(${f(5)},${f(3)},${f(1)})`; \n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer,\n\t\t\t\tplaylists: state.playlistsReducer\n    }\n}\n\nexport default connect(stateToProps)(Player);","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux'\n\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select'; \nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport FilterListIcon from '@material-ui/icons/FilterList';\n\nimport SongCard from './SongCard.js';\nimport Tag from './Tag.js'\n\n\nfunction SongCardList(props) {\n\tconst { lang } = useParams();\n\t\n\tconst [isFilterActive, setFilterActive] = useState(false);\t\n\tconst [songs, setSongs] = useState([]);\n\tconst [songsFilter, setSongsFilter] = useState([]);\n\tconst [songsInputFilter, setSongsInputFilter] = useState([]);\n\t\n\tconst [productions, setProductions] = useState([]);\n\tconst [productionChecked, setProductionChecked] = useState([]);\n\tconst [productionCheckedCnt, setProductionCheckedCnt] = useState(0);\n\t\n\tconst [songAttrs, setSongAttrs] = useState([0, 1, 2, 3]);\n\tconst [songAttrChecked, setSongAttrChecked] = useState([false, false, false, false]);\n\tconst [songAttrCheckedCnt, setSongAttrCheckedCnt] = useState(0);\n\t\n\tconst [levels, setLevelsAttrs] = useState([0, 1, 2]);\n\tconst [levelChecked, setLevelChecked] = useState([false, false, false]);\n\tconst [levelCheckedCnt, setLevelCheckedCnt] = useState(0);\n\t\n\tconst [inputVal,setInputVal] = useState('');\n\t\n\tconst [order, setOrder] = useState('');\n\tconst [orderSt, setOrderSt] = useState('');\n\t\n\tconst dark='#dddddd', light='#555555';\n\tconst useStyles = makeStyles({root: { \"& .MuiSvgIcon-root\": {color: props.theme==='dark'?'#dddddd':'#555555' }, '& label.Mui-focused': { color: props.theme==='dark'?'#dddddd':'#555555' },'& label': { color: props.theme==='dark'?'#dddddd':'#555555' },\"& .MuiOutlinedInput-input\": { color: props.theme==='dark'?'#dddddd':'#555555' }, '& .MuiOutlinedInput-root': { '& fieldset': { borderColor: props.theme==='dark'?'#dddddd':'#333333', }, '&.Mui-focused fieldset': { borderColor: props.theme==='dark'?'#dddddd':'#555555', }, },}});\n\tconst classes = useStyles();\n\tvar timerID;\n\n\tuseEffect(()=>{ \t\n\t\taxios.get('/api/song_album_view')\n\t\t.then((res)=>{setSongs(shuffle(res.data.rows));setSongsFilter(res.data.rows);setSongsInputFilter(res.data.rows);}) \n\t\t.catch(()=>{});\n\t\taxios.get('/api/production')\n\t\t.then((res)=>{setProductions(res.data.rows); let temp = new Array(res.data.rows.length+1); setProductionChecked([...temp.fill(false)])}) \n\t\t.catch(()=>{});\n\t\treturn ()=>clearTimeout(timerID);\n\t}, []);\n\t\n\tuseEffect(()=>{ \t\n\t\t\tsetSongsFilter(songs.filter((song)=>(productionCheckedCnt?productionChecked[song.production_id]:true)&&(songAttrCheckedCnt?songAttrChecked[song.song_type]:true)&&(levelCheckedCnt?levelChecked[song.song_level]:true)));\n\t}, [productionCheckedCnt, songAttrCheckedCnt, levelCheckedCnt]);\n\t\n\t\n\tuseEffect(()=>{\n\t\tinputFilter(inputVal);\n\t}, [songsFilter]);\n\n\tfunction inputFilter(val){\n\t\taxios.all([getSongIdol(val), getSongUnit(val)]).then(axios.spread((res1, res2)=>{\n\t\t\tsetSongsInputFilter(songsFilter.filter(({song_title_kr: tk, song_title_en: te, song_title_jp: tj, song_id: si})=>tk?.toLowerCase().includes(val.toLowerCase())||te?.toLowerCase().includes(val.toLowerCase())||tj?.toLowerCase().includes(val.toLowerCase())||res1.data.rows.some((song)=>song['song_id']===si)||res2.data.rows.some((song)=>song['song_id']===si))); \n\t\t})).catch();\n\t}\n\t\n\tuseEffect(()=>{\n\t let temp = [...songsInputFilter];\n\t\tif(orderSt===0) {\n\t\t\tshuffle(temp);\n\t\t\tsetSongsInputFilter([...temp]);\n\t\t}\n\t\telse if(orderSt===1 && order===0) {\n\t\t\tsetSongsInputFilter([...temp.sort((a,b)=>{return (eval('a.song_title_'+lang)?eval('a.song_title_'+lang+'.toUpperCase()'):a.song_title_en.toUpperCase())>(eval('b.song_title_'+lang)?eval('b.song_title_'+lang+'.toUpperCase()'):b.song_title_en.toUpperCase())?1:-1})]);\n\t\t}\n\t\telse if(orderSt===1 && order===1) {\n\t\t\tsetSongsInputFilter([...temp.sort((a,b)=>{return (eval('a.song_title_'+lang)?eval('a.song_title_'+lang+'.toUpperCase()'):a.song_title_en.toUpperCase())<(eval('b.song_title_'+lang)?eval('b.song_title_'+lang+'.toUpperCase()'):b.song_title_en.toUpperCase())?1:-1})]);\n\t\t}\n\t\telse if(orderSt===2 && order===0) {\n\t\t\tsetSongsInputFilter([...temp.sort((a,b)=>{return (a.album_release_date>b.album_release_date)?1:-1})]);\n\t\t}\n\t\telse if(orderSt===2 && order===1) {\n\t\t\tsetSongsInputFilter([...temp.sort((a,b)=>{return (a.album_release_date<b.album_release_date)?1:-1})]);\n\t\t}\n\t\telse if(orderSt===3 && order===0) {\n\t\t\tsetSongsInputFilter([...temp.sort((a,b)=>{return (a.song_level>b.song_level)?1:-1})]);\n\t\t}\n\t\telse if(orderSt===3 && order===1) {\n\t\t\tsetSongsInputFilter([...temp.sort((a,b)=>{return (a.song_level<b.song_level)?1:-1})]);\n\t\t}\n\t}, [orderSt, order]);\n\t\n\tfunction getSongIdol(val){\n\t\treturn axios.get(`/api/song_idol_cv/search?idol_name_kr=${val}&idol_name_jp=${val}&idol_name_en=${val}&cv_name_kr=${val}&cv_name_jp=${val}&cv_name_en=${val}`);\t\t\t\t \n\t}\n\tfunction getSongUnit(val){\n\t\treturn axios.get(`/api/song_unit_idol_cv_view/search?idol_name_kr=${val}&idol_name_jp=${val}&idol_name_en=${val}&cv_name_kr=${val}&cv_name_jp=${val}&cv_name_en=${val}&unit_name_kr=${val}&unit_name_jp=${val}&unit_name_en=${val}`);\n\t}\n\treturn (\n\t\t<>\n\t\t<div className={`songSearchArea`}>\n\t\t\t<div className={`filterArea ${!isFilterActive&&'inactive'}`}>\n\t\t\t\t<div className={`production wrapper`}>\n\t\t\t\t\t<div className='label'>{{kr:'시리즈',jp:'シリーズ',en:'Series'}[lang]}</div>\n\t\t\t\t\t<div className='tagsArea alignCenter'>\n\t\t\t\t\t\t<div className='tags production'>{\n\t\t\t\t\t\t\tproductions.map((production, i)=>{\n\t\t\t\t\t\t\t\t\treturn(<div className={`tagCtrl ${!productionChecked[i+1]&&'inactive'}`} key={i} onClick={()=>{\n\t\t\t\t\t\t\t\t\t\t\tsetProductionCheckedCnt(productionChecked[i+1]?(productionCheckedCnt-1):(productionCheckedCnt+1));\t\n\t\t\t\t\t\t\t\t\t\t\tlet temp=[...productionChecked]; \n\t\t\t\t\t\t\t\t\t\t\ttemp.splice(i+1, 1, !temp[i+1]);\n\t\t\t\t\t\t\t\t\t\t\tsetProductionChecked([...temp]);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<Tag key={i} classify='production' id={production.production_id} name={eval('production.series_short_'+lang)} color1={adjust(production.production_color, 200)} color2={adjust(production.production_color, 80)} padding={{1:2,2:2.5,4:3}[i]}></Tag>\n\t\t\t\t\t\t\t\t</div>)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={`songAttr wrapper`}>\n\t\t\t\t\t<div className='label'>{{kr:'곡',jp:'曲',en:'Song'}[lang]}</div>\n\t\t\t\t\t<div className='tagsArea alignCenter'>\n\t\t\t\t\t\t<div className='tags'>{\n\t\t\t\t\t\t\tsongAttrs.map((songAttr, i)=>{\n\t\t\t\t\t\t\t\t\treturn(<div className={`tagCtrl ${!songAttrChecked[i]&&'inactive'}`} key={i} onClick={()=>{\n\t\t\t\t\t\t\t\t\t\t\tsetSongAttrCheckedCnt(songAttrChecked[i]?(songAttrCheckedCnt-1):(songAttrCheckedCnt+1));\t\n\t\t\t\t\t\t\t\t\t\t\tlet temp=[...songAttrChecked]; \n\t\t\t\t\t\t\t\t\t\t\ttemp.splice(i, 1, !temp[i]);\n\t\t\t\t\t\t\t\t\t\t\tsetSongAttrChecked([...temp]);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<Tag key={i} classify='songAttr' id={i} name={{kr:{0:'솔로',1:'유닛',2:'다인',3:'단체'}[i], en:{0:'Solo',1:'Unit',2:'Multi',3:'ALL'}[i], jp:{0:'ソロ',1:'ユニット',2:'茶人',3:'単体'}[i]}[lang]} color1={{0:'#c7ff99',1:'#99fdff',2:'#da99ff',3:'#ffa53d'}[i]} color2={{0:'#99fff0',1:'#bd99ff',2:'#ff99ac',3:'#dfff3d'}[i]} padding={{0:6,1:5,2:5,3:2}[i]}></Tag>\n\t\t\t\t\t\t\t\t</div>)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t\t<div className={`level wrapper`}>\n\t\t\t\t\t<div className='label'>{{kr:'난이도',jp:'難易度',en:'Level'}[lang]}</div>\n\t\t\t\t\t<div className='tagsArea alignCenter'>\n\t\t\t\t\t\t<div className='tags'>{\n\t\t\t\t\t\t\tlevels.map((level, i)=>{\n\t\t\t\t\t\t\t\t\treturn(<div className={`tagCtrl ${!levelChecked[i]&&'inactive'}`} key={i} onClick={()=>{\n\t\t\t\t\t\t\t\t\t\t\tsetLevelCheckedCnt(levelChecked[i]?(levelCheckedCnt-1):(levelCheckedCnt+1));\t\n\t\t\t\t\t\t\t\t\t\t\tlet temp=[...levelChecked]; \n\t\t\t\t\t\t\t\t\t\t\ttemp.splice(i, 1, !temp[i]);\n\t\t\t\t\t\t\t\t\t\t\tsetLevelChecked([...temp]);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<Tag key={i} classify='level' id={i} name={{kr:{0:'쉬움',1:'보통',2:'어려움'}[i], en:{0:'Easy',1:'Normal',2:'Hard'}[i], jp:{0:'安直',1:'普通',2:'普通'}[i]}[lang]} color1={{0:'#24e2ff',1:'#f8ff26',2:'#f57d05'}[i]} color2={{0:'#6b7aff',1:'#8dff5c',2:'#ff3d3d'}[i]} padding={4}></Tag>\n\t\t\t\t\t\t\t\t</div>)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t\t<div className={`order wrapper`}>\n\t\t\t\t\t<div className='label'>{{kr:'정렬',jp:'整列',en:'Sort'}[lang]}</div>\n\t\t\t\t\t<div className='alignCenter'>\n\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={`formCtrl`} style={{width:'40%',maxWidth:'300px', marginRight:'20px' }} className={classes.root} margin=\"dense\">\n\t\t\t\t\t\t\t<InputLabel id=\"demo-simple-select-outlined-label\" >{{kr:'기준',jp:'整列',en:'Sort by'}[lang]}</InputLabel>\n\t\t\t\t\t\t\t<Select labelId=\"demo-simple-select-outlined-label\" id=\"demo-simple-select-outlined\" value={orderSt} onChange={e=>setOrderSt(e.target.value)}>\n\t\t\t\t\t\t\t\t<MenuItem value={0}>{{kr:'랜덤',jp:'ランダム',en:'Random'}[lang]}</MenuItem> \n\t\t\t\t\t\t\t\t<MenuItem value={1}>{{kr:'제목',jp:'題目',en:'Title'}[lang]}</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={2}>{{kr:'발매일',jp:'発売日',en:'Release Date'}[lang]}</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={3}>{{kr:'난이도',jp:'難易度',en:'Level'}[lang]}</MenuItem>  \n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={`formCtrl`} style={{width:'30%',maxWidth:'220px'}} margin=\"dense\" className={classes.root}>\n\t\t\t\t\t\t\t<InputLabel id=\"demo-simple-select-outlined-label\" >{{kr:'순서',jp:'順序',en:'Order by'}[lang]}</InputLabel>\n\t\t\t\t\t\t\t<Select labelId=\"demo-simple-select-outlined-label\" id=\"demo-simple-select-outlined\" value={order} onChange={e=>setOrder(e.target.value)}>\n\t\t\t\t\t\t\t\t<MenuItem value={0}>{{kr:'오름차순',jp:'昇順',en:'Ascending'}[lang]}</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={1}>{{kr:'내림차순',jp:'降順',en:'Descending'}[lang]}</MenuItem>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</FormControl>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className='songSearchBar'>\n\t\t\t\t<div className={`filterButtonArea alignCenter`} onClick={()=>setFilterActive(!isFilterActive)}> <FilterListIcon></FilterListIcon> </div>\n\t\t\t\t<div className='inputArea'> \n\t\t\t\t\t<input className=\"songSearchInput\" type=\"search\" name=\"\" placeholder={{kr:\"제목, 아이돌, 성우, 유닛 검색\",jp:'タイトル, アイドル, 声優, ユニット 検索',en:\"Title, Idol, CV, Unit search...\"}[lang]} onChange={(e)=>{\n\t\t\t\t\tclearTimeout(timerID);\n\t\t\t\t\ttimerID=setTimeout(()=>{\n\t\t\t\t\t\tinputFilter(e.target.value);\n\t\t\t\t\t\tsetInputVal(e.target.value);\n\t\t\t\t\t},500);\n\t\t\t\t\t}}/>\n\t\t\t\t</div>\n\t\t\t</div>  \n\t\t</div>\n\t\t\n\t\t<div className='songCardList'  onTouchStart={()=>{setFilterActive(false)}}>\n\t\t\t\n\t\t\t{ \n\t\t\t\tsongsInputFilter.map((song, idx)=>{\n\t\t\t\t\treturn (<>\n\t\t\t\t\t\t<SongCard key={idx} song={song}> </SongCard>\n\t\t\t\t\t</>)\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t\t</>\n\t)\n}\n\nfunction shuffle(array) { for (let i = array.length - 1; i > 0; i--) { let j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] = [array[j], array[i]]; } return [...array]; }\n\nfunction adjust(color, amount) {\n\tif(!color) return null;\n    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));\n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer,\n\t\t\t\ttheme: state.themeReducer\n    }\n}\n\nexport default connect(stateToProps)(SongCardList);","import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux'\nimport { useLocation, useParams, useHistory } from 'react-router-dom';\nimport { useSwipeable } from \"react-swipeable\";\n\nimport PlaylistAddIcon from '@material-ui/icons/PlaylistAdd';\nimport { IconButton } from '@material-ui/core'\n\nimport Tag from './Tag.js'\n\nfunction SongCard(props) {\n\tconst [tagData, setTagData] = useState([]);\n\tconst [isLoading, setLoading] = useState(true);\n\tconst { lang } = useParams();\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst ref = useRef(null);\n\tlet timerID;\n\tconst componentRef = useRef();\n\tconst [isSwiped, setSwiped] = useState(false);\n\tconst handlers = useSwipeable({\n\t\t\tonSwipedRight: (eventData) => setSwiped(false),\n  \t\tonSwipedLeft: (eventData) => setSwiped(true)\n\t});\n\tfunction handleClick(e: any) { \n\t\tif(componentRef && componentRef.current){ \n\t\t\tconst ref: any = componentRef.current;\n\t\t\tif(!ref.contains(e.target)){ setSwiped(false); }\n\t\t} \n\t}\t\n\n\tuseEffect(()=>{ \n\t\tsetLoading(true);\n\t\tsetSwiped(false);\n\t\tif(props.song)\n\t\t\taxios.get('/api/song_data_view?song_id=' + props.song.song_id)\n\t\t\t.then((res)=>{setTagData(res.data.rows); setLoading(false);}) \n\t\t\t.catch(()=>{})\n\t\tdocument.addEventListener(\"touchend\", handleClick, false);\t\n\t\treturn ()=>{\n\t\t\tsetLoading(false);\n\t\t\tclearTimeout(timerID);\n\t\t\tdocument.removeEventListener(\"touchend\", handleClick);\n\t\t}\n\t}, [props.song]);\n \n\tif(!props.song) return (null);\n\n\treturn (\n\t\t<div className={'wrap'} {...handlers}>\n\t\t\t<div className={`${isLoading?'loading':'loaded'} behind alignCenter` }>\n\t\t\t\t<div className='iconArea'><IconButton variant='outlined' size='small' ><PlaylistAddIcon></PlaylistAddIcon></IconButton></div>\n\t\t\t</div>\n\t\t<div className={`songCard pid${props.song.production_id} ${isSwiped?'swiped':''} ${isLoading?'loading':'loaded'}`}  ref={componentRef} onClick={()=>{\n\t\t\t\tsetSwiped(false);\n\t\t\t\thistory.push(`${location.pathname}?song_id=${props.song.song_id}`);\n\t\t\t}}>\n\t\t\t<div className=\"coverImgArea\">\n\t\t\t\t<div className=\"coverImg\">\n\t\t\t\t\t<img src={\"/api/img/album/\"+props.song.album_id}></img>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"title\"><span>{eval('props.song.song_title_'+lang)||props.song.song_title_en}</span></div>\n\n\t\t\t<div className='tagsArea' ref={ref}>\n\t\t\t\t{\n\t\t\t\t\t(props.song.song_type===0 || props.song.song_type===2) ?\n\t\t\t\t\t\ttagData.map((idolCV, idx)=>{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Tag key={idx*2} classify='idol' id={idolCV.idol_id} name={eval('idolCV.idol_name_'+lang)} color1={adjust(idolCV.idol_color, 120)} color2={adjust(idolCV.idol_color, 20)}></Tag>\n\t\t\t\t\t\t\t\t\t<Tag key={idx*2+1} classify='cv' id={idolCV.cv_id} name={eval('idolCV.cv_name_'+lang)} color1={adjust(idolCV.idol_color, 120)} color2={adjust(idolCV.idol_color, 20)}></Tag>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t:\n\t\t\t\t\t\ttagData.map((unit, idx)=>{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Tag key={idx*2} classify='unit' id={unit.unit_id} name={eval('unit.unit_name_'+lang)||unit.unit_name_en} color1={adjust(unit.unit_color, 120)} color2={adjust(unit.unit_color, 20)}></Tag>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t\t</div>\n\t)\n}\n\n\nfunction adjust(color, amount) {\n\tif(!color) return null;\n    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));\n}\n\nfunction hex_setSat(H, sat) { // Convert hex to RGB first \n\tlet r = 0, g = 0, b = 0; if (H.length === 4) { r = \"0x\" + H[1] + H[1]; g = \"0x\" + H[2] + H[2]; b = \"0x\" + H[3] + H[3]; } else if (H.length === 7) { r = \"0x\" + H[1] + H[2]; g = \"0x\" + H[3] + H[4]; b = \"0x\" + H[5] + H[6]; } // Then to HSL \n\tlet v=Math.max(r,g,b), c=v-Math.min(r,g,b); let h= c && ((v===r) ? (g-b)/c : ((v===g) ? 2+(b-r)/c : 4+(r-g)/c)); h=60*(h<0?h+6:h); let s=sat;\n\tlet f= (n,k=(n+h/60)%6) => v - v*s*Math.max( Math.min(k,4-k,1), 0); return `rgb(${f(5)},${f(3)},${f(1)})`; \n}\n\nfunction hex_setHue(H, hue) { // Convert hex to RGB first \n\tlet r = 0, g = 0, b = 0; if (H.length === 4) { r = \"0x\" + H[1] + H[1]; g = \"0x\" + H[2] + H[2]; b = \"0x\" + H[3] + H[3]; } else if (H.length === 7) { r = \"0x\" + H[1] + H[2]; g = \"0x\" + H[3] + H[4]; b = \"0x\" + H[5] + H[6]; } // Then to HSL \n\tlet v=Math.max(r,g,b), c=v-Math.min(r,g,b);\n  let h= c && ((v==r) ? (g-b)/c : ((v==g) ? 2+(b-r)/c : 4+(r-g)/c)); \n  h=60*(h<0?h+6:h) + hue;let s=v&&c/v; \n\tlet f= (n,k=(n+h/60)%6) => v - v*s*Math.max( Math.min(k,4-k,1), 0);     \n  return `rgb(${f(5)},${f(3)},${f(1)})`;       \n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer\n    }\n}\n\nexport default connect(stateToProps)(SongCard);","import React from 'react';\nimport { connect } from 'react-redux'\nimport { useParams, useHistory, useLocation } from 'react-router-dom';\nimport { useSwipeable } from \"react-swipeable\";\n\nimport MusicNoteIcon from '@material-ui/icons/MusicNote';\nimport QueueMusicIcon from '@material-ui/icons/QueueMusic';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport Player from './Player.js';\n \nfunction Nav(props) {\n\tconst { lang  } = useParams();\n\tconst history = useHistory();\n\tconst location = useLocation();\n\tconst iconColor='#909090',iconActiveColor='#f0757c';\n\tconst handlers = useSwipeable({\n\t\t\tonSwipedUp: (eventData) => history.push(`${location.pathname}?song_id=${props.playerReducer.song_id}`)\n\t});\n\t\n\treturn (\n\t\t<div className=\"nav\" {...handlers}>\n\t\t\t<div className={'menu '+ (props.isPlayerActive ? \"inactive\": \"\")}>\n\t\t\t\t<div className={\"tab music \" + (props.nowPage === 'songs' ? \"active\" : \"\")}\n\t\t\t\t\tonClick={()=>{\n\t\t\t\t\t\tif(props.nowPage !== 'songs') history.replace(`/${lang}/songs`);\n\t\t\t\t\t}}>\n\t\t\t\t\t<MusicNoteIcon style={{fontSize: 35, color:props.nowPage==='songs'?iconActiveColor:iconColor}}></MusicNoteIcon>\n\t\t\t\t\t<p className=\"label\">{{ kr: '곡 선택', en: 'Songs', jp: '曲選択' }[lang]}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={\"tab playlist \" + (props.nowPage === 'playlist' ? \"active\" : \"\")}\n\t\t\t\t\tonClick={()=>{\n\t\t\t\t\t\tif(props.nowPage !== 'playlist') history.replace(`/${lang}/playlist`);\n\t\t\t\t\t}}>\n\t\t\t\t\t<QueueMusicIcon style={{fontSize: 35, color:props.nowPage==='playlist'?iconActiveColor:iconColor}}></QueueMusicIcon>\n\t\t\t\t\t<p className=\"label\">{{ kr: '리스트', en: 'Playlist', jp: 'プレイリスト' }[lang]}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={\"tab search \" + (props.nowPage === 'search' ? \"active\" : \"\")}\n\t\t\t\t\tonClick={()=>{\n\t\t\t\t\t\tif(props.nowPage !== 'search') history.replace(`/${lang}/search`);\n\t\t\t\t\t}}>\n\t\t\t\t\t<SearchIcon style={{fontSize: 35, color:props.nowPage==='search'?iconActiveColor:iconColor}}></SearchIcon>\n\t\t\t\t\t<p className=\"label\">{{ kr: '검색', en: 'Search', jp: '検索'}[lang]}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={\"tab setting \" + (props.nowPage === 'setting' ? \"active\" : \"\")}\n\t\t\t\t\tonClick={()=>{\n\t\t\t\t\t\tif(props.nowPage !== 'setting') history.replace(`/${lang}/setting`);\n\t\t\t\t\t}}>\n\t\t\t\t\t<SettingsIcon style={{fontSize: 35, color:props.nowPage==='setting'?iconActiveColor:iconColor}}></SettingsIcon>\n\t\t\t\t\t<p className=\"label\">{{kr: '설정', en: 'Setting', jp: '設定'}[lang]}</p>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<Player></Player>\n\t\t</div>\n\t)\n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer\n    }\n}\n\nexport default connect(stateToProps)(Nav);","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { connect } from 'react-redux'\n\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\n\nfunction PlaylistTab(props) {\n\tconst { lang } = useParams();\n\t\n\tconst [activeArea, setActiveArea] = useState('init');\n\tconst [activatedCardModal, setActivatedCardModal] = useState(null);\n\t\n\tvar timerID;\n\t\n\tuseEffect(()=>{ \t\n\t\treturn ()=>clearTimeout(timerID);\n\t}, []);\n\t\n\n\treturn (\n\t<div className={`playlistTab`}>\n\t\t<div className={`setlistArea ${activeArea}`}>\n\t\t\t<div className='labelArea' onTouchStart={()=>setActiveArea(activeArea==='playlist'?'setlist':'playlist')}><div className='label'>\n\t\t\t\t{{kr: '라이브 세트리스트', en: 'Live Setlist', jp: 'ライブ セット·リスト'}[lang]}\n\t\t\t\t{activeArea==='setlist'?<ArrowDropUpIcon style={{fontSize: 30, color:props.theme==='dark'?'#ffffff':'#444444'}}></ArrowDropUpIcon>:<ArrowDropDownIcon style={{fontSize: 30, color:props.theme==='dark'?'#ffffff':'#444444'}}></ArrowDropDownIcon>}\n\t\t\t</div></div>\n\t\t\t<div className='contentArea' onTouchStart={()=>setActiveArea('setlist')}> \n\t\t\t\t<div className='alert'>{{kr: '준비 중 입니다 :)', en: 'Getting ready :)', jp: '準備中です :)'}[lang]}</div>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t<div className={`playlistArea ${activeArea}`} >\n\t\t\t<div className='labelArea' onTouchStart={()=>setActiveArea(activeArea==='playlist'?'setlist':'playlist')}><div className='label'>\n\t\t\t\t{{kr: '나의 플레이리스트', en: 'My Playlist', jp: '僕の プレイリスト'}[lang]}\n\t\t\t\t{activeArea!=='playlist'?<ArrowDropUpIcon style={{fontSize: 30, color:props.theme==='dark'?'#ffffff':'#444444'}}></ArrowDropUpIcon>:<ArrowDropDownIcon style={{fontSize: 30, color:props.theme==='dark'?'#ffffff':'#444444'}}></ArrowDropDownIcon>}\n\t\t\t</div></div>\n\t\t\t<div className='ttt'>\n\t\t\t\t<div className='alert'>{props.playlists?.length===0&& {kr: '비어있어요...', en: \"It's empty...\", jp: '空いています...'}[lang]}</div>\n\t\t\t<div className='contentArea' onTouchStart={()=>setActiveArea('playlist')}> {\n\t\t\t\tprops.playlists?.map((playlist, i)=>{\n\t\t\t\t\treturn (<div className={`playlistCard`} onClick={()=>{\n\t\t\t\t\t\tactivatedCardModal!==i ? setActivatedCardModal(i):setActivatedCardModal(null);\n\t\t\t\t\t}} style={{backgroundImage:`url(/api/img/album/${playlist.data[0].album_id})`, backgroundRepeat:'no-repeat', backgroundSize: 'cover',backgroundPosition:'center center'}}>\n\t\t\t\t\t\t<div className={`cardModal alignCenter ${i!==activatedCardModal&&'inactive'}`}> \n\t\t\t\t\t\t\t<div className={`edit`}><EditIcon style={{fontSize: 25, color:'#ffffff'}}></EditIcon></div>\n\t\t\t\t\t\t\t<div className={`play`} onClick={()=>props.dispatch({type:'playlistReload',payload:{playlistNum: i}})}><PlayArrowIcon style={{fontSize: 45, color:'#ffffff'}}></PlayArrowIcon></div>\n\t\t\t\t\t\t\t<div className={`delete`} onClick={()=>{window.confirm({kr: '정말 삭제하시겠습니까?', en: 'Delete?', jp: '本当に削除しますか?'}[lang])&&props.dispatch({type:'deletePlaylist', payload:playlist.name})}}><DeleteIcon style={{fontSize: 25, color:'#ffffff'}}></DeleteIcon></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={`textArea alignCenter`}>\n\t\t\t\t\t\t\t<div className={`text`}>\n\t\t\t\t\t\t\t\t<div className={`title alignCenter`}><span>{playlist.name}</span></div>\n\t\t\t\t\t\t\t\t<div className={`songCnt alignCenter`}>{playlist.data.length+{kr: '곡', en: ' songs', jp: '曲'}[lang]}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>)\n\t\t\t\t})\n\t\t\t}</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t)\n}\n\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer,\n\t\t\t\ttheme: state.themeReducer,\n  \t\t\tplaylists: state.playlistsReducer,\n\t\t}\n}\n\nexport default connect(stateToProps)(PlaylistTab);","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux'\n\nimport SongCardList from './SongCardList.js';\nimport PlaylistTab from './PlaylistTab.js';\n\nimport { BrowserRouter as Switch, useParams, Route, useLocation } from 'react-router-dom';\nimport queryString from 'query-string';\n\nfunction Content(props){\n\tconst { lang, page } = useParams();\n\tconst location = useLocation();\n\tconst { search } = useLocation();\n\tconst { song_id } = queryString.parse(search);\t\n\n\tuseEffect(()=>{ \n\t\tif(page) props.dispatch({type:'changePage', payload:page});\n\t\t\n\t\tif(song_id) \n\t\t\tif(props.playerReducer.song_id!==song_id && !props.playerReducer.pass)\n\t\t\t\tprops.dispatch({type:'playerReload', payload:{song_id: song_id}});\n\t\t\telse\n\t\t\t\tprops.dispatch({type:'playerActive'});\n\t\t\n\t\tif(song_id===undefined) props.dispatch({type:'playerInactive'});\n\t\t\n\t\tprops.playerReducer.pass = false;\n\t}, [location]);\n\n\t\n\treturn(\n\t\t<div className={\"content \"}>\n\t\t\t<div className={\"page \" + (props.nowPage === 'songs' ? \"active\" : \"\")} >\n\t\t\t\t<div className={\"songs\"} >\n\t\t\t\t\t<SongCardList></SongCardList>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className={\"page \" + (props.nowPage === 'playlist'? \"active\" : \"\")} >\n\t\t\t\t<PlaylistTab></PlaylistTab>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className={\"page \" + (props.nowPage === 'search' ? \"active\" : \"\")} >\n\t\t\t\t<div className={\"search\"} >\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className={\"page \" + (props.nowPage === 'setting' ? \"active\" : \"\")} >\n\t\t\t\t<div className={\"setting\"} >\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t<Switch>\n\t\t\t<Route path={'/:lang/:page'}>\n\t\t\t\t\n\t\t\t</Route>\n\t\t</Switch>\n\t\t</div>\n\t)\n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer,\n\t\t\t\tplaylists: state.playlistsReducer,\n    }\n}\n\nexport default connect(stateToProps)(Content);","import React, { useState } from 'react';\nimport { connect } from 'react-redux'\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport LanguageIcon from '@material-ui/icons/Language';\nimport PersonIcon from '@material-ui/icons/Person';\nimport WbSunnyIcon from '@material-ui/icons/WbSunny';\nimport NightsStayIcon from '@material-ui/icons/NightsStay';\nimport SyncIcon from '@material-ui/icons/Sync';\nimport SyncDisabledIcon from '@material-ui/icons/SyncDisabled';\n\nimport { Switch } from '@material-ui/core';\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\n\nfunction Popup(props) {\n\tconst { lang, page } = useParams();\n\tconst history = useHistory();\n\t\n\tconst [isPopupActiveded, setPopupActiveded] = useState(false);\n\t\n\tconst iconColor = '#777777';\n\t\n\t// useEffect(()=>{\n\t// \tsetPopupActiveded(false);\n\t// }, [location]);\n\t\n\treturn (\n\t\t<div className={`popup ${props.isPlayerActive&&'inactive'}`}>\n\t\t\t<div className='userImgArea' onClick={()=>{setPopupActiveded(!isPopupActiveded)}}>\n\t\t\t\t{false?\n\t\t\t\t\t<div className='userImg'><img></img></div>\n\t\t\t\t\t:\n\t\t\t\t\t<div className='alignCenter iconArea'><PersonIcon style={{fontSize: 35, color:iconColor}}></PersonIcon></div>\n\t\t\t\t}\n\t\t\t</div>\t\n\t\t\t\n\t\t\t<div className={`detailsArea ${!isPopupActiveded&&'inactive'}`}>\n\t\t\t\t<div className={`alignCenter loginArea`}>login하셈</div>\n\t\t\t\t<div className='alignCenter langLabel'><LanguageIcon></LanguageIcon></div>\n\t\t\t\t<div className='alignCenter langSetting'>\n\t\t\t\t\t<ToggleButtonGroup size='small' exclusive={true} value={lang} onChange={(event, value)=>{\n\t\t\t\t\t\tif(value) {\n\t\t\t\t\t\t\thistory.replace(`/${value}/${page}`);\n\t\t\t\t\t\t\t//props.dispatch({type:'langChanged'});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<ToggleButton value='kr'>한국어</ToggleButton>\n\t\t\t\t\t\t<ToggleButton value='en'>&nbsp;ENG&nbsp;</ToggleButton>\n\t\t\t\t\t\t<ToggleButton value='jp'>日本語</ToggleButton>\n\t\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className='alignCenter themeLabel'>{props.theme==='light'?<WbSunnyIcon></WbSunnyIcon>:<NightsStayIcon></NightsStayIcon>}</div>\n\t\t\t\t<div className='alignCenter themeSetting'>\n\t\t\t\t\t<Switch color='primary' checked={props.theme==='light'} onChange={(event)=>{\n\t\t\t\t\t\tevent.target.checked?props.dispatch({type:'lightTheme'}):props.dispatch({type:'darkTheme'});\t\t\n\t\t\t\t\t}}></Switch>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className='alignCenter animLabel'>{props.anim==='off'?<SyncDisabledIcon></SyncDisabledIcon>:<SyncIcon></SyncIcon>}</div>\n\t\t\t\t<div className='alignCenter animSetting'>\n\t\t\t\t\t<Switch color='primary' checked={props.anim==='on'} onChange={(event)=>{\n\t\t\t\t\t\tevent.target.checked?props.dispatch({type:'animOn'}):props.dispatch({type:'animOff'});\t\t\n\t\t\t\t\t}}></Switch>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\t\n\t\t\t\n\t\t\t<div className={`bg ${!isPopupActiveded&&'inactive'}`} onTouchStart={()=>{setPopupActiveded(false)}}></div>\t\n\t\t</div>\n\t)\n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer,\n\t\t\t\ttheme: state.themeReducer,\n\t\t\t\tanim: state.animReducer\n    }\n}\n\nexport default connect(stateToProps)(Popup);","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { BrowserRouter as Switch, Route, Redirect } from 'react-router-dom';\n\nimport Nav from './Nav.js';\nimport Content from './Content.js';\nimport Popup from './Popup.js';\n\nfunction App(props) {\n\tuseEffect(()=>{\n\tif(props.theme==='light') {\n\t\tdocument.documentElement.style.setProperty(\"--text\", '#444444');\n\t\tdocument.documentElement.style.setProperty(\"--text2\", '#888888');\n\t\tdocument.documentElement.style.setProperty(\"--pageBg\", '#fbfbfb');\n\t\tdocument.documentElement.style.setProperty(\"--tabBg\", '#ffffff');\n\t\tdocument.documentElement.style.setProperty(\"--lightShadow\", '#ffffff');\n\t\tdocument.documentElement.style.setProperty(\"--shadow\", '#8f8f8f');\n\t\tdocument.documentElement.style.setProperty(\"--darkShadow\", '#000000');\t\n\t\t\n\t\tdocument.documentElement.style.setProperty(\"--im\", '#fffcfc');\t\n\t\tdocument.documentElement.style.setProperty(\"--cg\", '#f5f8ff');\t\n\t\tdocument.documentElement.style.setProperty(\"--ml\", '#fffff9');\t\n\t\tdocument.documentElement.style.setProperty(\"--sm\", '#f7fffa');\n\t\tdocument.documentElement.style.setProperty(\"--sc\", '#f7ffff');\t\n\t}\n\telse {\n\t\tdocument.documentElement.style.setProperty(\"--text\", '#dddddd');\n\t\tdocument.documentElement.style.setProperty(\"--text2\", '#bbbbbb');\n\t\tdocument.documentElement.style.setProperty(\"--pageBg\", '#242424');\n\t\tdocument.documentElement.style.setProperty(\"--tabBg\", '#1a1a1a');\n\t\tdocument.documentElement.style.setProperty(\"--lightShadow\", '#0a0a0a');\n\t\tdocument.documentElement.style.setProperty(\"--shadow\", '#000000');\n\t\tdocument.documentElement.style.setProperty(\"--darkShadow\", '#777777');\t\n\t\t\n\t\tdocument.documentElement.style.setProperty(\"--im\", '#362e2e');\t\n\t\tdocument.documentElement.style.setProperty(\"--cg\", '#2e3036');\t\n\t\tdocument.documentElement.style.setProperty(\"--ml\", '#36342e');\t\n\t\tdocument.documentElement.style.setProperty(\"--sm\", '#2e3636');\n\t\tdocument.documentElement.style.setProperty(\"--sc\", '#2e3636');\t\n\t}\n},[props.theme])\n\n\tuseEffect(()=>{\n\t\tif(localStorage.getItem('userTheme')==='dark') props.dispatch({type:'darkTheme'});\n\t\telse if(localStorage.getItem('userTheme')==='light') props.dispatch({type:'lightTheme'});\n\t\telse if(window.matchMedia&&window.matchMedia('(prefers-color-scheme:Dark)').matches)\n\t\t\tprops.dispatch({type:'darkTheme'});\n\n\t\tif(localStorage.getItem('anim')==='off') props.dispatch({type:'animOff'});\n\t\telse props.dispatch({type:'animOn'});\n\t},[])\n\t\n\treturn (\n\t\t<div className={`App ${props.anim}`}> \n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/:lang/:page\">\n\t\t\t\t\t<Popup></Popup>\n\t\t\t\t\t<Content></Content>\n\t\t\t\t\t<Nav></Nav>\n\t\t\t\t</Route>\n\t\t\t\t<Route exact path=\"/:lang\" render={props => (<Redirect to={`/${props.match.params.lang}/songs`} />)}/>\n\t\t\t\t<Route exact path=\"/\" render={props => (<Redirect to={'/kr/songs'}/>)}/>\n\t\t\t</Switch>\n\t\t</div>\n\t\t);\n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer,\n\t\t\t\ttheme: state.themeReducer,\n\t\t\t\tanim: state.animReducer\n    }\n}\n\nexport default connect(stateToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './style.scss';\nimport App from './App';\n\nimport { Provider } from  'react-redux';\nimport { createStore, combineReducers } from 'redux';\nimport { BrowserRouter } from 'react-router-dom';\n\n\nfunction playerActiveReducer(state = false, action) {\n    if(action.type === 'playerActive') {\n\t\t\treturn true;\n    } \n\t\telse if(action.type === 'playerInactive') {\n\t\t\treturn false;\n    } \n    return state;\n}\n\nlet playerDefault = {reload: false, lang:false, song_id: null, playerActive:false, playlistReload:false, playlistNum:null, pass:false};\nfunction playerReducer(state = playerDefault, action) { \n\tif(action.type === 'playerReload') {\n\t\tlet cp = JSON.parse(JSON.stringify(state));\n\t\tcp.reload=!cp.reload;\n\t\tcp.song_id = action.payload.song_id;\t\n\t\treturn cp;\n\t}\n\tif(action.type === 'playlistReload') {\n\t\tlet cp = JSON.parse(JSON.stringify(state));\n\t\tcp.playlistReload=!cp.playlistReload;\n\t\tcp.playlistNum = action.payload.playlistNum;\n\t\treturn cp;\n\t}\n\tif(action.type === 'langChanged') {\n\t\tlet cp = JSON.parse(JSON.stringify(state));\n\t\tcp.lang=!cp.lang;\n\t\treturn cp;\n\t}\n\treturn state;\n}\n\nlet playlistsDefault = JSON.parse(window.localStorage.getItem(\"playlists\"))||[];\nfunction playlistsReducer(state = playlistsDefault, action) { \n\tif(action.type === 'saveNew') {\n\t\tlet cp = JSON.parse(JSON.stringify(state));\n\t\tcp = [...cp, action.payload];\n\t\treturn cp;\n\t}\n\tif(action.type === 'replacePlaylist') {\n\t\tlet cp = JSON.parse(JSON.stringify(state));\n\t\tcp.splice(cp.findIndex(e=>e.name===action.payload.name), 1, action.payload);\n\t\treturn cp;\n\t}\n\tif(action.type === 'addToPlaylist') {\n\t\tlet cp = JSON.parse(JSON.stringify(state));\n\t\tlet pl = cp.find(e=>e.name===action.payload.name).data;\n\t\taction.payload.data.forEach((e)=>{if(pl.filter(ele=>ele.song_id===e.song_id).length===0) pl.push(e)});\n\t\treturn cp;\n\t}\n\tif(action.type === 'deletePlaylist') {\n\t\tlet cp = JSON.parse(JSON.stringify(state));\n\t\tcp = [...cp.filter((ele)=>ele.name!==action.payload)];\n\t\treturn cp;\n\t}\n\treturn state;\n}\n\nfunction langReducer(state = 'en', action) {\n\tif(action.type === 'setLang') return action.payload;\n  return state;\n}\n\nfunction pageReducer(state = 'songs', action) {\n    if(action.type === 'changePage') {\n      return action.payload;\n    } \n    return state;\n}\n\nfunction themeReducer(state = 'light', action) {\n    if(action.type === 'darkTheme') {\n\t\t\tlocalStorage.setItem('userTheme', 'dark');\n\t\t\treturn 'dark';\n    } \n\t\tif(action.type === 'lightTheme') {\n\t\t\tlocalStorage.setItem('userTheme', 'light');\n      return 'light';\n    } \n    return state;\n}\n\nfunction animReducer(state = 'on', action) {\n    if(action.type === 'animOff') {\n\t\t\tlocalStorage.setItem('anim', 'off');\n\t\t\treturn 'off';\n    } \n\t\tif(action.type === 'animOn') {\n\t\t\tlocalStorage.setItem('anim', 'on');\n\t\t\treturn 'on';\n    } \n\t\treturn state;\n}\n\nlet store = createStore(combineReducers({playerActiveReducer, playerReducer, playlistsReducer, langReducer, pageReducer, themeReducer, animReducer}));\n\nReactDOM.render(\n  <React.StrictMode>\n\t<BrowserRouter>\n\t\t <Provider store={store}>\n\t  <App />\n\t\t\t  </Provider>\n\t</BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\n\nfunction Tag(props) {\n\treturn (\n\t\t<div className=\"tag\" style={{backgroundImage: `linear-gradient(110deg, `+props.color1+`, 50%,`+props.color2+`)`}}>\n\t\t\t<div className='image alignCenter'>\n\t\t\t\t<img style={{padding: `${props.padding}px`}} src={\"/api/img/\"+props.classify+\"/\"+props.id}></img>\n\t\t\t</div>\n\t\t\t<div className='name'>\n\t\t\t\t{props.name}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nfunction stateToProps(state) {\n    return {\n\t\t\t\tisPlayerActive: state.playerActiveReducer,\n        playerReducer : state.playerReducer,\n\t\t\t\tlang: state.langReducer,\n\t\t\t\tnowPage: state.pageReducer\n    }\n}\n\nexport default connect(stateToProps)(Tag);"],"sourceRoot":""}